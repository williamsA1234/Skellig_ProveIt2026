{
  "profileName": "Pump_AI_AO_DI_DO_M_V1",
  "version": "1.0.0",
  "description": "Pump with full I/O complement and Mode parameter: analog speed feedback (PV), speed setpoint (SP), digital start command input (DI), digital status output (DO), and Mode-aware control. The '_M' suffix indicates configurable operating modes.",
  "applicableTo": "Pumps with full I/O and mode control (AI + AO + DI + DO + Mode)",
  "ignitionUdtSource": "ProveIt/Pump_AI_AO_DI_DO_M",
  "Device_Core": {
    "description": "Equipment identity and context metadata",
    "attributes": [
      {
        "name": "TagName",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "ISA-5.1 instrument tag identifier (e.g., XV-250-001)"
      },
      {
        "name": "ShortName",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "Human-readable equipment name used in UNS topic path (e.g., Harvest Valve)"
      },
      {
        "name": "ProfileDefinition",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "URL to the SM Profile definition that this instance conforms to"
      },
      {
        "name": "Description",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "Free-text description of the equipment instance"
      },
      {
        "name": "Area",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "ISA-95 area designation (e.g., Cell_Culture)"
      },
      {
        "name": "Unit",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "ISA-95 unit designation (e.g., SUB-250)"
      }
    ]
  },
  "IO": {
    "description": "Process I/O - analog input, analog output, digital input, digital output bound to field instruments via MQTT",
    "attributes": [
      {
        "name": "Speed_Pv",
        "dataType": "opc:Double",
        "nodeId": "i=11",
        "description": "Measured pump speed from field instrument",
        "engUnit": "per-instance (MQTT suffix: _RPM or _percent)",
        "accessLevel": "Read"
      },
      {
        "name": "Speed_Sp",
        "dataType": "opc:Double",
        "nodeId": "i=11",
        "description": "Pump speed setpoint sent to field instrument",
        "engUnit": "per-instance (MQTT suffix: _RPM or _percent)",
        "accessLevel": "ReadWrite"
      },
      {
        "name": "Start_Command",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Start command confirmation from VFD or PLC (true = running)",
        "engUnit": "per-instance (MQTT suffix: _PV)",
        "accessLevel": "Read"
      },
      {
        "name": "Status",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Run/stop command output to pump (true = run)",
        "engUnit": "per-instance (MQTT suffix: _SP)",
        "accessLevel": "ReadWrite"
      }
    ]
  },
  "Parameters": {
    "description": "Configurable parameters for alarm setpoints, operating modes, and alarm enables",
    "attributes": [
      {
        "name": "High_High_Sp",
        "dataType": "opc:Float",
        "nodeId": "i=10",
        "description": "High-High alarm setpoint for Speed_Pv",
        "defaultValue": 100
      },
      {
        "name": "High_Sp",
        "dataType": "opc:Float",
        "nodeId": "i=10",
        "description": "High alarm setpoint for Speed_Pv",
        "defaultValue": 90
      },
      {
        "name": "Low_Sp",
        "dataType": "opc:Float",
        "nodeId": "i=10",
        "description": "Low alarm setpoint for Speed_Pv",
        "defaultValue": 10
      },
      {
        "name": "Low_Low_Sp",
        "dataType": "opc:Float",
        "nodeId": "i=10",
        "description": "Low-Low alarm setpoint for Speed_Pv",
        "defaultValue": 30
      },
      {
        "name": "High_High_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable High-High limit alarm",
        "defaultValue": false
      },
      {
        "name": "High_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable High limit alarm",
        "defaultValue": false
      },
      {
        "name": "Low_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable Low limit alarm",
        "defaultValue": false
      },
      {
        "name": "Low_Low_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable Low-Low limit alarm",
        "defaultValue": false
      },
      {
        "name": "Out_Min",
        "dataType": "opc:Float",
        "nodeId": "i=10",
        "description": "Minimum output clamp value",
        "defaultValue": 0.0
      },
      {
        "name": "Out_Max",
        "dataType": "opc:Float",
        "nodeId": "i=10",
        "description": "Maximum output clamp value",
        "defaultValue": 100.0
      },
      {
        "name": "AI_Bad_Alarm_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable bad quality alarm on analog input (PV)",
        "defaultValue": false
      },
      {
        "name": "AO_Bad_Alarm_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable bad quality alarm on analog output (SP)",
        "defaultValue": false
      },
      {
        "name": "Mode",
        "dataType": "opc:String",
        "nodeId": "i=12",
        "description": "Operating mode (e.g., CAS, MAN, AUTO)",
        "defaultValue": "CAS"
      },
      {
        "name": "DI_Bad_Alarm_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable bad quality alarm on start command input",
        "defaultValue": false
      },
      {
        "name": "DO_Bad_Alarm_Enab",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Enable/disable bad quality alarm on status output",
        "defaultValue": false
      },
      {
        "name": "Operator",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Operator acknowledgment or manual override flag",
        "defaultValue": false
      },
      {
        "name": "Maintenance",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Equipment is in maintenance mode",
        "defaultValue": false
      },
      {
        "name": "OOS",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Equipment is out of service",
        "defaultValue": false
      },
      {
        "name": "Interlocked",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Equipment is interlocked (prevented from operating)",
        "defaultValue": false
      },
      {
        "name": "ResetReq",
        "dataType": "opc:Boolean",
        "nodeId": "i=1",
        "description": "Reset request flag (clear alarm or fault condition)",
        "defaultValue": false
      }
    ]
  },
  "Alarms": {
    "description": "Alarm conditions: four-level limit alarms on Speed_Pv; bad quality on AI, AO, DI, DO; ESTOP",
    "attributes": [
      {
        "name": "High_High",
        "alarmType": "opc:LimitAlarmType",
        "condition": "Speed_Pv > Parameters.High_High_Sp",
        "priority": "High",
        "enabledBy": "Parameters.High_High_Enab",
        "description": "Speed_Pv exceeds high-high limit"
      },
      {
        "name": "High",
        "alarmType": "opc:LimitAlarmType",
        "condition": "Speed_Pv > Parameters.High_Sp",
        "priority": "Low",
        "enabledBy": "Parameters.High_Enab",
        "description": "Speed_Pv exceeds high limit"
      },
      {
        "name": "Low",
        "alarmType": "opc:LimitAlarmType",
        "condition": "Speed_Pv < Parameters.Low_Sp",
        "priority": "Low",
        "enabledBy": "Parameters.Low_Enab",
        "description": "Speed_Pv falls below low limit"
      },
      {
        "name": "Low_Low",
        "alarmType": "opc:LimitAlarmType",
        "condition": "Speed_Pv < Parameters.Low_Low_Sp",
        "priority": "High",
        "enabledBy": "Parameters.Low_Low_Enab",
        "description": "Speed_Pv falls below low-low limit"
      },
      {
        "name": "AI_Bad_Quality",
        "alarmType": "opc:OffNormalAlarmType",
        "condition": "Speed_Pv quality is Bad",
        "priority": "High",
        "enabledBy": "Parameters.AI_Bad_Alarm_Enab",
        "description": "Analog input (pv) has bad data quality (communication loss)"
      },
      {
        "name": "AO_Bad_Quality",
        "alarmType": "opc:OffNormalAlarmType",
        "condition": "Speed_Sp quality is Bad",
        "priority": "High",
        "enabledBy": "Parameters.AO_Bad_Alarm_Enab",
        "description": "Analog output (sp) has bad data quality (communication loss)"
      },
      {
        "name": "DI_Bad_Quality",
        "alarmType": "opc:OffNormalAlarmType",
        "condition": "Start_Command quality is Bad",
        "priority": "High",
        "enabledBy": "Parameters.DI_Bad_Alarm_Enab",
        "description": "Digital input has bad data quality (communication loss)"
      },
      {
        "name": "DO_Bad_Quality",
        "alarmType": "opc:OffNormalAlarmType",
        "condition": "Status quality is Bad",
        "priority": "High",
        "enabledBy": "Parameters.DO_Bad_Alarm_Enab",
        "description": "Digital output has bad data quality (communication loss)"
      },
      {
        "name": "ESTOP",
        "alarmType": "opc:OffNormalAlarmType",
        "condition": "ESTOP == true",
        "priority": "Critical",
        "enabledBy": "always",
        "description": "Emergency stop activated"
      }
    ]
  }
}